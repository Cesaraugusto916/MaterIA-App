```markdown
# 🧠 Aula 07 — Ordenando e Agrupando Dados

## 🎓 Dados da Aula
- **Tema Central**: Organização e agregação de dados
- **Comando(s)/Função(ões)**: `sort_values()`, `groupby()`, `agg()`
---

## 📍 Introdução

Nesta aula, vamos aprender como organizar os dados de forma lógica e extrair informações agregadas. Ordenar e agrupar são operações fundamentais para entender padrões, tendências e resumos estatísticos em grandes conjuntos de dados.

Essas técnicas aparecem em relatórios empresariais, dashboards de vendas, análises financeiras e até em rankings esportivos. No contexto do curso, elas são essenciais para preparar os dados antes de visualizações ou modelagens mais avançadas.

---

## 📚 Conteúdo Explicado

### 1. `sort_values()`

- **O que faz**: Ordena os dados com base em uma ou mais colunas.
- **Sintaxe**:
  ```python
  df.sort_values(by='coluna', ascending=True)
  ```
- **Parâmetros principais**:
  - `by`: nome da(s) coluna(s) para ordenar.
  - `ascending`: `True` para crescente, `False` para decrescente.
- **Resultado esperado**: DataFrame reorganizado.

### 2. `groupby()`

- **O que faz**: Agrupa os dados por uma ou mais colunas.
- **Sintaxe**:
  ```python
  df.groupby('coluna')
  ```
- **Resultado esperado**: Objeto GroupBy que pode ser combinado com funções agregadoras.

### 3. `agg()`

- **O que faz**: Aplica funções de agregação aos grupos.
- **Sintaxe**:
  ```python
  df.groupby('coluna').agg({'outra_coluna': 'função'})
  ```
- **Funções comuns**: `'sum'`, `'mean'`, `'max'`, `'min'`, `'count'`

---

## 📈 Exemplos Práticos

```python
import pandas as pd

df = pd.DataFrame({
    'produto': ['A', 'B', 'A', 'C', 'B'],
    'vendas': [100, 200, 150, 300, 250]
})

# Ordenar por vendas decrescentes
ordenado = df.sort_values(by='vendas', ascending=False)
print(ordenado)

# Agrupar por produto e somar vendas
agrupado = df.groupby('produto').agg({'vendas': 'sum'})
print(agrupado)
```

---

## 🧪 Demonstração Aplicada

Imagine que você tem um DataFrame com vendas por loja e quer saber:

- Quais lojas venderam mais?
- Qual foi a média de vendas por loja?

```python
df = pd.DataFrame({
    'loja': ['SP', 'RJ', 'SP', 'MG', 'RJ', 'MG'],
    'vendas': [300, 200, 400, 150, 250, 350]
})

# Ordenar por vendas
df_ordenado = df.sort_values(by='vendas', ascending=False)

# Agrupar por loja e calcular soma e média
df_agrupado = df.groupby('loja').agg({
    'vendas': ['sum', 'mean']
})

print(df_ordenado)
print(df_agrupado)
```

---

## 📎 Dicas e Armadilhas

- Sempre verifique se a coluna usada em `groupby()` existe e está limpa (sem `NaN`).
- `agg()` aceita múltiplas funções por coluna — use dicionários para isso.
- Ordenar após agrupar é comum para destacar os maiores valores.
- Cuidado com o índice após `groupby()` — pode ser necessário usar `.reset_index()`.

---

## 🔄 Transições

- **Vem de:** Aula 06 — Filtrando Informações  
- **Vai para:** Aula 08 — Introdução ao Numpy

---

## 🎨 Recursos Visuais

- Tabela antes e depois de `sort_values()`
- Diagrama: DataFrame → `groupby()` → `agg()` → Tabela resumida
- Gráfico de barras com soma de vendas por grupo
- Fluxo: Dados → Agrupamento → Agregação → Ordenação

---

## 🗣 Estilo e Linguagem

> A aula deve:
> - Usar linguagem simples e direta.
> - Explicar “agregação” como “resumo por grupo”.
> - Usar analogias com planilhas: ordenar colunas, aplicar filtros, somar por categoria.
> - Incentivar o aluno a testar diferentes funções agregadoras e combinações de colunas.
```