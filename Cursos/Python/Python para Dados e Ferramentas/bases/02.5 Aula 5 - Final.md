# üß† Aula 05 ‚Äî A B√∫ssola do DataFrame: Indexa√ß√£o e Sele√ß√£o de Dados

## üéì Ol√°, Aventureiro\!

Na √∫ltima aula, voc√™ explorou os seus dados. Agora, voc√™ j√° sabe a estrutura do seu DataFrame, quais colunas existem, e onde est√£o os valores ausentes. Mas e se voc√™ precisar de uma informa√ß√£o espec√≠fica? E se quiser selecionar apenas as vendas de um dia?

Esta aula √© sobre como usar o seu mapa (o DataFrame) para encontrar exatamente o que voc√™ precisa. Vamos aprender as t√©cnicas essenciais de sele√ß√£o e indexa√ß√£o, que s√£o como a b√∫ssola e o GPS que guiam sua explora√ß√£o.

  - **Tema Central**: Acesso e sele√ß√£o de dados por r√≥tulo e posi√ß√£o
  - **Comando(s) Essencial(is)**: `df.loc[]`, `df.iloc[]`, `df.at[]`, `df.iat[]`

-----

# üìç Acessando o Conte√∫do: O Segredo da Precis√£o

Pense no seu DataFrame como uma grande planilha. Voc√™ pode encontrar uma informa√ß√£o de duas maneiras:

1.  **Pelo nome**: Voc√™ diz "v√° para a linha 'quarta-feira' e pegue o valor da coluna 'vendas'".
2.  **Pela posi√ß√£o**: Voc√™ diz "v√° para a linha n√∫mero 2 e pegue o valor da coluna n√∫mero 1".

No Pandas, o acesso por **r√≥tulo (nome)** e por **posi√ß√£o (n√∫mero)** s√£o duas l√≥gicas distintas e extremamente importantes. A escolha do m√©todo certo torna seu c√≥digo mais claro, evita erros e pode at√© otimizar a performance.

-----

# üìö Conte√∫do Explicado: As Quatro Ferramentas de Sele√ß√£o

### 1\. `loc[]`: Acesso por R√≥tulo (Nome)

O m√©todo `loc[]` (abrevia√ß√£o de "location") √© a sua ferramenta principal para acessar dados usando os nomes dos √≠ndices e das colunas. Ele √© o mais poderoso e expressivo para a maioria das tarefas.

A sintaxe √© sempre `df.loc[linhas, colunas]`. Os dois pontos (`:`) s√£o usados para indicar "todas as linhas" ou "todas as colunas".

  - **Para uma √∫nica linha**: `df.loc['seg']` retorna todas as colunas para a linha com o r√≥tulo `'seg'`.
  - **Para uma c√©lula espec√≠fica**: `df.loc['seg', 'vendas']` retorna o valor exato na interse√ß√£o da linha `'seg'` com a coluna `'vendas'`.
  - **Para uma coluna inteira**: `df.loc[:, 'vendas']` retorna uma **Series** contendo todos os valores da coluna `'vendas'`.
  - **Para fatias de dados**: Voc√™ pode passar listas para selecionar m√∫ltiplas linhas e colunas. Ex: `df.loc[['seg', 'ter'], ['vendas', 'loja']]`.

-----

### 2\. `iloc[]`: Acesso por Posi√ß√£o (N√∫mero Inteiro)

O m√©todo `iloc[]` (abrevia√ß√£o de "integer location") funciona como o `loc[]`, mas usando a l√≥gica de posi√ß√µes. Lembre-se: em Python, a contagem sempre come√ßa em 0. A primeira linha √© a `0`, a segunda √© a `1`, e assim por diante. O mesmo vale para as colunas.

A sintaxe √© `df.iloc[linhas, colunas]`.

  - **Para a primeira linha**: `df.iloc[0]` retorna a primeira linha completa.
  - **Para uma c√©lula espec√≠fica**: `df.iloc[0, 1]` retorna o valor da primeira linha (√≠ndice 0) e da segunda coluna (√≠ndice 1).
  - **Para fatias de dados**: A sintaxe de fatiamento (`start:stop`) funciona aqui, mas de forma exclusiva. `df.iloc[1:4]` retorna as linhas com posi√ß√µes 1, 2 e 3, **excluindo** a posi√ß√£o 4.

-----

### 3\. `at[]` e `iat[]`: Velocidade para uma √önica C√©lula

√Äs vezes, tudo o que voc√™ precisa √© acessar ou modificar o valor de uma √∫nica c√©lula. Para isso, o Pandas oferece vers√µes otimizadas dos m√©todos de sele√ß√£o. Elas s√£o mais r√°pidas, mas s√≥ funcionam para uma √∫nica c√©lula.

  - **`df.at[r√≥tulo_linha, r√≥tulo_coluna]`**: Acesso por r√≥tulo, super-r√°pido.
  - **`df.iat[pos_linha, pos_coluna]`**: Acesso por posi√ß√£o, super-r√°pido.

-----

## üìà Exemplos Pr√°ticos: M√£o na Massa

Vamos criar um DataFrame simples e praticar a sele√ß√£o. Note que j√° definimos a coluna 'dia' como √≠ndice, o que √© uma pr√°tica comum para usar `loc[]`.

```python
import pandas as pd

df = pd.DataFrame({
    'dia': ['seg', 'ter', 'qua', 'qui', 'sex'],
    'vendas': [250, 300, 280, 410, 380],
    'loja': ['A', 'A', 'B', 'B', 'A']
})
# Definimos o 'dia' como o √≠ndice do nosso DataFrame
df = df.set_index('dia')

print("--- DataFrame original ---")
print(df)
print("\n")

# Acesso por r√≥tulo ('qua')
print("--- Acesso por r√≥tulo (loc) ---")
print(df.loc['qua'])
print("\n")

# Acesso por posi√ß√£o (o √≠ndice 2 √© 'qua')
print("--- Acesso por posi√ß√£o (iloc) ---")
print(df.iloc[2])
print("\n")

# Acesso a uma c√©lula espec√≠fica por r√≥tulo
print("--- Valor da venda de sexta por r√≥tulo ---")
print(df.loc['sex', 'vendas'])
print("\n")

# Acesso a uma c√©lula espec√≠fica por posi√ß√£o
print("--- Valor da venda de sexta por posi√ß√£o ---")
print(df.iloc[4, 0])
```

**O que aprendemos com o exemplo?** Os resultados s√£o id√™nticos, mas a forma de pensar √© diferente. `loc[]` usa o nome que voc√™ definiu (`'qua'`), enquanto `iloc[]` usa a posi√ß√£o num√©rica (`2`).

-----

## üß™ Demonstra√ß√£o Aplicada: Modificando Dados com Precis√£o

A capacidade de selecionar uma c√©lula espec√≠fica √© muito √∫til para tarefas de limpeza de dados, como a corre√ß√£o de um erro de digita√ß√£o ou a atualiza√ß√£o de um valor.

```python
# Acessar o valor atual da venda de quarta-feira
valor_quarta = df.at['qua', 'vendas']
print(f"Vendas na quarta: {valor_quarta}")

# Ops, descobrimos que o valor correto era 300
print("Corrigindo o valor...")
df.at['qua', 'vendas'] = 300

# Vamos verificar se a altera√ß√£o foi aplicada
print("\n--- Linha 'qua' ap√≥s a altera√ß√£o ---")
print(df.loc['qua'])
```

Note como usamos `at[]` para um acesso r√°pido e eficiente, e em seguida, usamos `loc[]` para verificar se a linha inteira foi modificada corretamente.

-----

## üìé Dicas e Armadilhas: O que o Profissional Faz

  - **`loc[]` e `iloc[]` s√£o exclusivos**: N√£o misture os dois\! Se o seu √≠ndice √© num√©rico, a confus√£o pode acontecer. `df.loc[0]` buscar√° o r√≥tulo `0`, enquanto `df.iloc[0]` buscar√° a primeira posi√ß√£o. O Pandas prefere que voc√™ seja expl√≠cito.
  - **`at[]` e `iat[]` para performance**: Se voc√™ precisa de um loop para iterar e modificar valores c√©lula por c√©lula, esses m√©todos s√£o muito mais r√°pidos que `loc[]` e `iloc[]`. Use-os com sabedoria\!
  - **Entenda seu √çndice**: Antes de usar `loc[]`, sempre verifique o seu √≠ndice com `df.index`. Se o √≠ndice n√£o for o que voc√™ espera, seu c√≥digo pode falhar.

-----

## üîÑ Transi√ß√µes e Conex√µes

  - **Vem de**: A aula anterior, onde exploramos o DataFrame com `head()`, `info()` e `describe()`. Agora que voc√™ entende o conte√∫do, voc√™ est√° pronto para **selecionar peda√ßos espec√≠ficos** desse conte√∫do.
  - **Vai para**: A pr√≥xima aula, que ir√° revolucionar sua forma de trabalhar com dados. Na **Aula 06 ‚Äî Filtrando Informa√ß√µes**, voc√™ n√£o vai apenas selecionar por r√≥tulo ou posi√ß√£o, mas por **condi√ß√µes l√≥gicas**, como "selecione todas as vendas maiores que 300" ou "selecione todas as vendas da loja 'A'".

-----

## üé® Recursos Visuais e Mentais (Para Pensar)

1.  **Analogia da Planilha**: Pense no `loc[]` como o nome da coluna (`A`, `B`, `C`) e o `iloc[]` como o n√∫mero da coluna (`1`, `2`, `3`).
2.  **O Fluxo de Trabalho (Com a Sele√ß√£o)**: Importar ‚Üí Explorar ‚Üí **Selecionar (esta aula)** ‚Üí Limpar ‚Üí Analisar ‚Üí Visualizar.
3.  **A Precis√£o da B√∫ssola**: Um bom analista de dados sabe exatamente onde est√° e para onde est√° indo. O `loc[]` e o `iloc[]` s√£o a sua b√∫ssola para navegar no universo de dados.

-----

Voc√™ agora tem o poder de encontrar qualquer peda√ßo de dado em seu DataFrame. Na pr√≥xima aula, vamos combinar essa habilidade com a l√≥gica para filtrar seus dados de maneira incrivelmente poderosa.

Pronto para filtrar e encontrar o ouro nos seus dados?

---

# üß™ Exerc√≠cios ‚Äî Aula 05: Indexa√ß√£o e Sele√ß√£o de Dados

## üß© Parte 1: Acesso por R√≥tulo com `loc[]`

1. **Leia o arquivo `dados.csv` e selecione a linha com √≠ndice `'seg'` usando `loc[]`.**

2. **Selecione todas as linhas da coluna `'vendas'` no DataFrame `dados.csv` usando `loc[]`.**

3. **Selecione as linhas `'seg'` e `'ter'` e as colunas `'vendas'` e `'loja'` no DataFrame `dados.csv` usando `loc[]`.**

4. **Atualize o valor da c√©lula na linha `'qua'` e coluna `'vendas'` para 300 usando `loc[]`.**

5. **Selecione todas as colunas para a linha `'sex'` no DataFrame `dados.csv` usando `loc[]`.**

---

## üîç Parte 2: Acesso por Posi√ß√£o com `iloc[]`

6. **Leia o arquivo `dados.csv` e selecione a primeira linha usando `iloc[]`.**

7. **Selecione a c√©lula na linha 0 e coluna 1 no DataFrame `dados.csv` usando `iloc[]`.**

8. **Selecione todas as linhas da terceira coluna no DataFrame `dados.csv` usando `iloc[]`.**

9. **Selecione as linhas 1 a 4 e as colunas 0 a 2 no DataFrame `dados.csv` usando `iloc[]`.**

10. **Atualize o valor da c√©lula na linha 2 e coluna 0 para 500 usando `iloc[]`.**

---

## üß± Parte 3: Acesso R√°pido com `at[]` e `iat[]`

11. **Leia o arquivo `dados.csv` e acesse o valor da c√©lula na linha `'seg'` e coluna `'vendas'` usando `at[]`.**

12. **Atualize o valor da c√©lula na linha `'qua'` e coluna `'loja'` para `'C'` usando `at[]`.**

13. **Acesse o valor da c√©lula na linha 0 e coluna 1 no DataFrame `dados.csv` usando `iat[]`.**

14. **Atualize o valor da c√©lula na linha 3 e coluna 2 para `'D'` usando `iat[]`.**

15. **Verifique o valor atual da c√©lula na linha `'sex'` e coluna `'vendas'` usando `at[]`.**


Aqui est√£o os **5 exerc√≠cios adicionais** para completar os **20 exerc√≠cios** baseados na Aula 05 sobre **Indexa√ß√£o e Sele√ß√£o de Dados**, j√° formatados em Markdown:

## üß© Parte 4: Combina√ß√£o de M√©todos

16. **Leia o arquivo `dados.csv` e selecione as linhas `'seg'` e `'sex'` e a coluna `'loja'` usando `loc[]`.**

17. **Selecione as linhas 0 e 4 e as colunas 1 e 2 no DataFrame `dados.csv` usando `iloc[]`.**

18. **Acesse o valor da c√©lula na linha `'qua'` e coluna `'vendas'` usando `at[]` e atualize para 320.**

19. **Acesse o valor da c√©lula na linha 2 e coluna 0 usando `iat[]` e atualize para `'qui'`.**

20. **Leia o arquivo `dados.csv` e selecione todas as linhas e colunas exceto a √∫ltima usando `iloc[]`.**

---
